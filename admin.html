<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>·ä†·à∞·çã ·ã≤·åÇ·â≥·àç ·â¢·äï·åé - Admin</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Ethiopic:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="admin-header">
            <h1 class="amharic-text">üîß ·ã®·å®·ãã·â≥ ·ä†·àµ·â∞·ã≥·ã≥·à™</h1>
            <button id="backBtn" class="btn btn-secondary amharic-text">·ãà·ã∞ ·å®·ãã·â≥ ·â∞·àò·àà·àµ</button>
        </div>
        
        <div class="border-container">
            <div class="border green"></div>
            <div class="border yellow"></div>
            <div class="border red"></div>
            
            <div class="admin-content">
                <!-- Create Room -->
                <div class="admin-section">
                    <h2 class="amharic-text">·ä†·ã≤·àµ ·å®·ãã·â≥ ·â§·âµ ·çç·å†·à≠</h2>
                    <div class="form-group">
                        <label class="amharic-text">·ã®·ä†·àµ·â∞·ã≥·ã≥·à™ ·àµ·àù</label>
                        <input type="text" id="adminName" placeholder="·ä†·àµ·â∞·ã≥·ã≥·à™ ·àµ·àù" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="amharic-text">·ã®·â¢·äï·åé ·ä†·ã≠·äê·âµ</label>
                        <select id="gameType" class="form-control">
                            <option value="75ball">75-·â¢·äï·åé</option>
                            <option value="90ball">90-·â¢·äï·åé</option>
                            <option value="30ball">30-·â¢·äï·åé</option>
                            <option value="pattern">·äï·ãµ·çç ·â¢·äï·åé</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="amharic-text">·ã®·å®·ãã·â≥ ·àö·äì</label>
                        <select id="stakeAmount" class="form-control">
                            <option value="25">25 ·â•·à≠</option>
                            <option value="50">50 ·â•·à≠</option>
                            <option value="100">100 ·â•·à≠</option>
                            <option value="200">200 ·â•·à≠</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="amharic-text">·ã®·å®·ãã·â≥ ·çç·âÖ·à≠</label>
                        <select id="maxPlayers" class="form-control">
                            <option value="10">10 ·â∞·å´·ãã·âæ·âΩ</option>
                            <option value="20">20 ·â∞·å´·ãã·âæ·âΩ</option>
                            <option value="50">50 ·â∞·å´·ãã·âæ·âΩ</option>
                            <option value="90" selected>90 ·â∞·å´·ãã·âæ·âΩ</option>
                        </select>
                    </div>
                    <button id="createRoomBtn" class="btn btn-success amharic-text">·å®·ãã·â≥ ·â§·âµ ·çç·å†·à≠</button>
                </div>
                
                <!-- Active Rooms -->
                <div class="admin-section">
                    <h2 class="amharic-text">·äï·âÅ ·ã®·å®·ãã·â≥ ·â§·â∂·âΩ</h2>
                    <div id="activeRooms" class="rooms-list">
                        <!-- Rooms will be populated here -->
                    </div>
                </div>
                
                <!-- System Controls -->
                <div class="admin-section">
                    <h2 class="amharic-text">·ã®·àµ·à≠·ãì·âµ ·àò·âÜ·å£·å†·à™·ã´·ãé·âΩ</h2>
                    <div class="control-grid">
                        <button id="broadcastBtn" class="btn btn-info amharic-text">·àõ·àµ·â≥·ãà·âÇ·ã´ ·àã·ä≠</button>
                        <button id="kickAllBtn" class="btn btn-danger amharic-text">·àÅ·àâ·äï·àù ·ä†·ãç·å£</button>
                        <button id="restartServerBtn" class="btn btn-warning amharic-text">·à∞·à≠·â®·à≠ ·ã≥·åç·àù ·åÄ·àù·à≠</button>
                        <button id="viewLogsBtn" class="btn btn-secondary amharic-text">·àù·ãù·åà·â£·ãé·âΩ ·ã≠·àò·àç·ä®·â±</button>
                    </div>
                </div>
                
                <!-- Game Statistics -->
                <div class="admin-section">
                    <h2 class="amharic-text">·ã®·å®·ãã·â≥ ·àµ·â≥·â≤·àµ·â≤·ä≠·àµ</h2>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-label amharic-text">·ä†·å†·âÉ·àã·ã≠ ·â∞·å´·ãã·âæ·âΩ</div>
                            <div class="stat-value" id="totalPlayers">0</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label amharic-text">·äï·âÅ ·å®·ãã·â≥·ãé·âΩ</div>
                            <div class="stat-value" id="activeGames">0</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label amharic-text">·ãõ·à¨ ·ã®·â∞·à∏·äê·çâ</div>
                            <div class="stat-value" id="todayWins">0</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label amharic-text">·ä†·å†·âÉ·àã·ã≠ ·ãç·à≠·ãµ</div>
                            <div class="stat-value" id="totalStake">0 ·â•·à≠</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="ws.js"></script>
    <script src="game.js"></script>
    <script>
        // Check admin password
        const adminPassword = prompt('·ã®·ä†·àµ·â∞·ã≥·ã≥·à™ ·ã®·ã≠·àà·çç ·âÉ·àç ·ã´·àµ·åà·â°:');
        if (adminPassword !== 'asse2123') {
            alert('·ã´·àç·â∞·çà·âÄ·ã∞ ·àò·ã≥·à®·àª!');
            window.location.href = 'index.html';
        }
        
        // Initialize admin connection
        connectAsAdmin();
        
        // Back to game button
        document.getElementById('backBtn').addEventListener('click', () => {
            window.location.href = 'index.html?admin=true';
        });
        
        // Create room button
        document.getElementById('createRoomBtn').addEventListener('click', () => {
            const adminName = document.getElementById('adminName').value;
            const gameType = document.getElementById('gameType').value;
            const stakeAmount = document.getElementById('stakeAmount').value;
            const maxPlayers = document.getElementById('maxPlayers').value;
            
            if (!adminName) {
                alert('·ä•·â£·ä≠·ãé ·ã®·ä†·àµ·â∞·ã≥·ã≥·à™ ·àµ·àù ·ã´·àµ·åà·â°');
                return;
            }
            
            createGameRoom(adminName, gameType, stakeAmount, maxPlayers);
        });
        
        // System control buttons
        document.getElementById('broadcastBtn').addEventListener('click', () => {
            const message = prompt('·àõ·àµ·â≥·ãà·âÇ·ã´ ·ã≠·åª·çâ:');
            if (message) {
                sendBroadcast(message);
            }
        });
        
        document.getElementById('kickAllBtn').addEventListener('click', () => {
            if (confirm('·àÅ·àâ·äï·àù ·â∞·å´·ãã·âæ·âΩ ·ä®·å®·ãã·â≥ ·àõ·àµ·ãà·åà·ãµ ·ã≠·çà·àç·åã·àâ?')) {
                kickAllPlayers();
            }
        });
        
        document.getElementById('restartServerBtn').addEventListener('click', () => {
            if (confirm('·à∞·à≠·â®·à≠ ·ä•·äï·ã∞·åà·äì ·àõ·àµ·åÄ·àò·à≠ ·ã≠·çà·àç·åã·àâ?')) {
                restartServer();
            }
        });
        
        document.getElementById('viewLogsBtn').addEventListener('click', () => {
            viewServerLogs();
        });
        
        // Function to update room list
        function updateRoomList(rooms) {
            const container = document.getElementById('activeRooms');
            container.innerHTML = '';
            
            rooms.forEach(room => {
                const roomElement = document.createElement('div');
                roomElement.className = 'room-card';
                roomElement.innerHTML = `
                    <div class="room-header">
                        <span class="room-id">·â§·âµ: ${room.id}</span>
                        <span class="room-players">üë• ${room.players}/${room.maxPlayers}</span>
                    </div>
                    <div class="room-body">
                        <div class="room-info amharic-text">
                            <div>·ä†·ã≠·äê·âµ: ${room.gameType}</div>
                            <div>·ãç·à≠·ãµ: ${room.stake} ·â•·à≠</div>
                            <div>·ä†·àµ·â∞·ã≥·ã≥·à™: ${room.admin}</div>
                        </div>
                        <div class="room-actions">
                            <button class="btn btn-sm btn-info" onclick="joinRoomAsAdmin('${room.id}')">·åç·â£</button>
                            <button class="btn btn-sm btn-danger" onclick="deleteRoom('${room.id}')">·à∞·à≠·ãù</button>
                        </div>
                    </div>
                `;
                container.appendChild(roomElement);
            });
        }
        
        // Function to update statistics
        function updateStatistics(stats) {
            document.getElementById('totalPlayers').textContent = stats.totalPlayers || 0;
            document.getElementById('activeGames').textContent = stats.activeGames || 0;
            document.getElementById('todayWins').textContent = stats.todayWins || 0;
            document.getElementById('totalStake').textContent = `${stats.totalStake || 0} ·â•·à≠`;
        }
    </script>
</body>
</html>